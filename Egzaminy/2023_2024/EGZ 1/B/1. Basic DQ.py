def print_straight(T):
    # Zamień None na '#'
    formatted_T = [[('#' if item is None else item) for item in row] for row in T]

    # Oblicz maksymalną szerokość każdej kolumny
    column_widths = [max(len(str(formatted_T[i][j])) for i in range(len(formatted_T))) for j in range(len(formatted_T[0]))]

    # Wypośrodkuj kolumny
    for row in formatted_T:
        row_str = " ".join(f"{str(row[col]).rjust(column_widths[col])}" for col in range(len(row)))
        print(row_str)

def kstrong(T,k):
    print(len(T))
    n = len(T)

    DQ = [[0] * n for _ in range(k + 1)]

    DQ[0][0] = max(DQ[0][0], T[0])

    for i in range(1, n):
        DQ[0][i] = DQ[0][i - 1] + T[i] if DQ[0][i - 1] + T[i] > 0 else 0

    print(DQ[0])
    print('')

    for i in range(1, min(k + 1, n)):
        DQ[i][i] = max(DQ[i - 1][i - 1], T[i])

    # print_straight(DQ)

    for row in range(1, k + 1):
        for col in range(row + 1, n):
            DQ[row][col] = max(DQ[row][col - 1] + T[col], DQ[row - 1][col - 1])


    for br in DQ:
        print(br)


    return max(DQ[k])


T_2 = [912, -333, 566, 883, 4, -521, 786, 103, 976, 285, 614, 123, 436, 513, -762, 151, 224, 261, 230, 939, 476, 969, 682, -631, -352, -469, 790, -947, 380, 377, 674, -623, 656, 949, 126, -43, -964, -1, 962, 519, 584, 805, 254, 683, -364, -313, -730, 327, 104, -541, 750, -371, 812, 337, 906, 47, 984, 189, 814, 219, -324, -753, 114, 271, -88, 573, -438, 923, -788, 777, 170, 863, 824, 189, 542, 195, -788, -289, 410, -359, 712, -525, 78, 227, 924, 697, -258, 207, -328, -821, 14, 123, -380, 857, 434, 679, 776, 717, 326, 739, 436, -905, 634, 623, 448, -701, 214, -563, 964, -657, -794, 223, 288, 461, -926, 731, -188, -993, -834, -47, -784, -989, -358, -763, 692, 385, 50, 319, -80, 21, 478, 915, 276, 465, -954, 295, 96, -333, 798, -75, -92, -889, 786, 111, 128, 653, 214, 155, -228, 369, 106, -679, -816, 149, 486, 643, 580, 569, 754, 663, 184, 925, 950, 955, -596, 753, 274, 975, 632, 317, 430, 859, 476, 785, 402, 263, 584, -37, -102, 947, 548, -681, 74, 431, 608, -901, 862, 771, 220, -793, -58, 319, 656, -549, 358, 491, 284, 633, -786, -615, 920, 149, 630, 291, -972, 41, -618, 143, 768, -341, 638, 867, 260, -881, 322, 215, -888, -805, 30, 347, 948, 961, 802, 255, 808, 733, 462, -963, 772, -369, 930, -535, -632, -749, 118, -571, 996, 161, 626, 167, 848, 189, -206, -491, 564, -889, 42, -319, -96, 853, 134, -907, -932, 441, 866, 983, 216, 957, -246, -771, 84, -873, -442, -847, -576, 869, 110, 619, -188, 969, 978, 999, 456, 869, 950, 923, -412, 769, 154, 895, 40, 365, 406, 107, 228, 713, 458, 79, -664, 717, 262, 275, -340, 977, -362, 879, -640, -861, -742, 403, 404, 801, 562, -143, -936, -525, 614, 331, -12, -889, -426, 135, 8, 381, 982, 11, 372, 545, 914, 959, 976, -629, -830, 635, 484, 401, 234, 151, 600, 973, 134, 499, -620, 209, 930, -295, 544, 981, -246, 115, -700, 521, -50, 119, 64, 869, 86, 507, 84, 625, 538, -55, 464, 277, -150, 347, -788, 585, 826, -983, 816, -53, 670, 939, -740, 961, 194, 119, 568, 309, 494, 379, 108, -185, 26, 167, 936, 837, 846, 451, 916, 449, -106, 311, -584, 309, -830, -171, -44, -49, 170, 511, -712, 797, -990, -803, -84, 633, 250, 607, -736, 389, 838, 651, -908, 265, 786, 15, 168, -461, -942, 67, -196, -65, 274, -495, -240, -405, 222, 811, 868, -729, -514, -543, 704, 685, -142, 307, 148, 425, 146, -279, 968, -605, 518, 291, 276, 753, 634, -927, 8, 37, 694, 467, 660, 985, 354, 335, 392, 229, 38, -819, -812, 529, 762, -495, -560, -261, -126, 995, -700, 641, -978, 39, 336, -421, 662, 379, 196, 73, 2, -63, 112, 77, 406, 835, -492, 769, 834, 847, -488, 477, 894, 915, 908, -697, -642, -647, 152, 813, -126, 251, 844, 505, 162, 983, -560, 5, 246, 419, 940, 417, 458, -583, -344, 917, 614, 723, -372, -601, -602, 151, -40, -533, -358, 675, -780, -217, 730, 583, -672, 925, 310, 507, 500, -985, 442, 543, 568, 989, 982, -347, -100, 249, -610, -967, 592, 357, 926, 867, -396, 129, 394, 623, 48, 149, 878, 27, 636, -905, 938, 535, 672, 853, 198, -995, -796, 633, 402, 543, 464, -989, 542, 643, -396, 81, -170, 823, -248, 237, -574, -35, -420, 257, 706, 703, -888, -29, -622, 323, 580, -361, 210, 463, 80, 837, 878, -923, 236, 313, -474, -303, 144, -293, -606, 771, 916, 809, 714, 599, 424, -277, 214, 267, -828, 609, -258, 967, -888, -677, -814, 43, 124, 985, -930, 975, 416, 749, 910, 707, 428, 769, 962, -599, 560, 757, -94, -19, 620, -769, 2, 831, -872, 693, 70, 171, 452, 593, -450, 55, 360, 405, 158, 683, 580, 281, -834, 95, 144, 205, -582, -939, 452, 193, -410, -215, -600, 557, 486, -235, -372, 409, -882, 167, 840, 445, -894, -571, 68, 833, 10, -695, -936, -709, -582, 979, 676, -945, -874, 335, 952, 453, -862, -779, 620, 289, 466, -743, 360, 893, 86, 91, 276, 577, 314, 151, 176, 693, -150, 699, 476, 873, 866, -455, 400, -661, 606, 387, -164, 729, -122, -191, 528, 189, 678, 411, 828, 385, -634, 423, 560, -965, 918, 403, -900, -97, -130, 927, 416, -541, 846, 739, 948, 361, -922, -247, 840, 469, 614, -299, 420, 417, -618, 79, 80, 445, 158, -427, 260, 913, -250, 543, -320, 45, -462, -251, 708, 257, 322, 943, 888, 877, 142, 731, 820, 865, -962, -543, -720, 405, 550, 891, 500, 841, 186, -431, -544, -29, -134, 683, -948, -777, 650, 271, 520, -669, 46, 123, 484, -857, -74, 951, -256, 901, 366, 27, 124, -609, -962, 919, 744, -765, 286, 835, 900, -713, 962, 383, 16, -197, 134, 427, -788, -145, -442, 159, -808, 541, 254, -875, 500, -929, 586, 599, -152, 5, 774, 347, 476, 457, -242, -647, -648, 29, 654, 179, -4, 585, -146, 287, 744, 29, 902, 203, 12, 129, 690, 895, -488, 749, 110, 387, -100, -353, -562, 543, 208, 685, -678, 891, 964, 649, 666, 687, -152, 221, -230, 315, -452, 353, 546, 63, 912, -245, -46, -851, 76, 505, -770, 935, 336, 349, 726, -355, -340, 337, 490, 335, 752, 69, 54, 43, -332, 65, 962, 447, -480, 149, 294, 59, 996, 457, 114, 239, 64, -965, 118, 275, 300, 897, 642, 167, -536, 701, -502, 811, -692, 753, 586, 535, -984, 29, -126, -251, 844, 537, 978, 775, 864, 989, -54, 651, 812, -185, -810, -679, -832, 461, -798, 131, 260, 921, -178, 655, 128, 149, 150, -803, 620, 937, 834, 895, 184, 181, 542, -147, 740, 225, 450, -655, 640, 605, 78, 163, -860, 73, 194, -895, -24, -725, -502, -467, 116, -25, 282, 191, 400, -109, 718, 835, 284, -337, 898, -311, 328, 365, 774, 659, 484, 985, -762, -735, -256, 253, 46, 387, 268, 945, 682, 7]
k_2 = 1000
T=[-20,5,-1,10,2,-8,10]
k=2
print(kstrong(T_2,k_2))